<!-- =IFERROR(IF(AC2="","",VLOOKUP(B2,$AB$1:$AC$489,2,FALSE)),"") -->
<!-- {{company_symbol}}
{{company_currency}}
{{company_exchange}}
{{company_industry}}
{{company_description}}
[[company_sector]]
[[company_country]]
[[company_ipo_date]] -->
<!-- {{df_json}} -->
<!-- https://jsfiddle.net/cakenite/f6b94evj/18/ -->
<!-- positioner: function() {
  return {
    x: this.chart.plotLeft,
    y: this.chart.plotTop
  };
},
shared: true, -->
<!-- {{price_json}} -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="canonical" href="https://charts.tendollardata.com/aapl-stock/apple/income-statement/revenue-sales/history" />
        <script>
            // global variables
            // var point1
            var latest_stock_price;
        </script>
        <!-- <script data-ad-client="ca-pub-8622650495968210" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <title>
            Home - Brand
        </title>
        <!-- https://stackoverflow.com/questions/26192897/should-i-use-bootstrap-from-cdn-or-make-a-copy-on-my-server -->
        <link rel="stylesheet" href="{{ url_for('static', filename='../static/bootstrap/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='../static/bootstrap/css/styles.min.css') }}">
        <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900">
                <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i"> -->
        <!-- DNS preconnect -->
        <!-- https://developer.mozilla.org/en-US/docs/Web/Performance/dns-prefetch -->
        <!-- https://gist.github.com/angelside/ec56ece1deae4edea505 -->
        <meta http-equiv="x-dns-prefetch-control" content="on">
        <link rel='preconnect' href='//stackpath.bootstrapcdn.com' crossorigin>
        <link rel="preconnect" href="//ajax.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
        <link rel="preconnect" href="https://use.fontawesome.com" crossorigin>
        <link rel="dns-prefetch" href="https://use.fontawesome.com">
        <link rel="preconnect" href="//cdnjs.cloudflare.com">
        <link rel="preconnect" href="//www.googletagmanager.com">
        <link rel="preconnect" href="//www.google-analytics.com">
        <link rel="dns-prefetch" href="//s3.amazonaws.com">
        <link rel="dns-prefetch" href="//ajax.googleapis.com">
        <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
        <link rel="dns-prefetch" href="//www.googletagmanager.com">
        <link rel="dns-prefetch" href="//www.google-analytics.com">
        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i"> -->


        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans">
        <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"> -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"> -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <style>
            table{border-spacing:0;border-collapse:collapse
            }
            .cell{width:20px;height:20px
            }
            .odd{background-color:brown
            }
            .even{background-color:pink
            }
        </style>
        <script src="{{ url_for('static', filename='../static/js/highstock.js') }}"></script>
        <!-- https://code.highcharts.com/stock/highstock.js -->
        <!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css"> -->
        <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script> -->
        <script type="text/javascript" src="{{ url_for('static', filename='../static/js/jquery-3.5.1.js') }}"></script>
        <!-- <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script> -->
        <!-- enables CSV -->
        <!-- <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js"></script> -->
        <!-- <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script> -->
        <!-- <script type="text/javascript" src="https://code.highcharts.com/modules/no-data-to-display.js"></script> -->
        <style>
highcharts-xaxis-labels{color:#000000 !important;font-size:30px !important
}
highcharts-yaxis-labels{padding-left:30px !important
}
highcharts-label-box{display:none
}
.td_fin_statement_class{text-align:right
}
/* .fixed_body{
            width:1000px;
            } */
#content-wrapper{max-width:1400px;/* text-align:center; */
    margin:0 auto
}
.hist_stats{text-align:right
}
.dataframe{overflow:scroll;color:blue
}
div.card.shadow.border-left-primary.py-2{position:sticky;position:-webkit-sticky
}
        </style>
        <style>
#df_myTable{margin:0 auto
}
.metric_table{text-align:center;margin:0 auto !important
}
div.card-body.hist_table{overflow:scroll;-ms-overflow-style:none;scrollbar-width:none
}
div.card-body.hist_table::-webkit-scrollbar{display:none;color:#20c08d
}
/* div.sticky-top{top:160px} */
.page-content{max-width:1200px;margin:32px auto;padding:32px;background:#fff
}
a{color:#21D4FD;transition:all 0.3s
}
a:hover{color:#B721FF
}
.tabbed{overflow-x:hidden;margin:32px 0;padding-bottom:16px;border-bottom:1px solid #ccc
}
.tabbed [type="radio"]{display:none
}
.tabs{display:flex;align-items:stretch;list-style:none;padding:0;border-bottom:1px solid #ccc
}
.tab > label{display:block;margin-bottom:-1px;padding:12px 15px;border:1px solid #ccc;background:#eee;color:#666;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.3s
}
.tab:hover label{border-top-color:#333;color:#333
}
.tab-content{display:none;color:#777
}
.tabbed [type="radio"]:nth-of-type(1):checked~.tabs .tab:nth-of-type(1) label,
.tabbed [type="radio"]:nth-of-type(2):checked~.tabs .tab:nth-of-type(2) label,
.tabbed [type="radio"]:nth-of-type(3):checked~.tabs .tab:nth-of-type(3) label,
.tabbed [type="radio"]:nth-of-type(4):checked~.tabs .tab:nth-of-type(4) label,
.tabbed [type="radio"]:nth-of-type(5):checked~.tabs .tab:nth-of-type(5) label{border-bottom-color:#fff;border-top-color:#B721FF;background:#fff;color:#222
}
.tabbed [type="radio"]:nth-of-type(1):checked~.tab-content:nth-of-type(1),
.tabbed [type="radio"]:nth-of-type(2):checked~.tab-content:nth-of-type(2),
.tabbed [type="radio"]:nth-of-type(3):checked~.tab-content:nth-of-type(3),
.tabbed [type="radio"]:nth-of-type(4):checked~.tab-content:nth-of-type(4){display:block;color:#1ebd1e,}
        </style>
        <script>
function centerLabels(chart) {
    var $container = $(chart.target.highbar);
    var axes = chart.target.axes;
    var $labels = $highbar.find('.highcharts-axis-labels .timeline_label');
    var $thisLabel,
        $nextLabel,
        thisXPos,
        nextXPos,
        delta,
        newXPos;
    $labels.each(function () {
        $thisLabel = $(this).parent('span');
        thisXPos = parseInt($thisLabel.css('left'));
        $nextLabel = $thisLabel.next();
        nextXPos = $nextLabel.length ? parseInt($nextLabel.css('left')) : axes[0].left + axes[0].width;
        delta = (nextXPos - thisXPos) / 2.0;
        newXPos = thisXPos + delta;
        if ($nextLabel.length || $(this).width() + newXPos < nextXPos) {
            $thisLabel.css('left', newXPos + 'px');
        } else {
            $thisLabel.remove();
        }
    });
}
        </script>
        <script>
document.addEventListener('DOMContentLoaded', function (data) {
    df_json = {{ df_json }};
    year_df_json = {{ year_df_json }};
    price_json = {{ price_json }};
    function mapData([x, y]) {
        return {
            name: x,
            x: x,
            y: Math.abs(y),
            actualY: y,
            color: y >= 0 ? '#7CB5EC' : '#E6496F',
            // '#20c08d': '#E6496F' //'#add6a6': '#E6496F' //'#19A419': '#E6496F'//
            // 7CB5EC, '#63CCA6' : '#E6496F'
        }
    }
    var groupings = ['sum', 'average', 'sum'];
    Highcharts.dateFormats = {
        q: function (timestamp) {
            var date = new Date(timestamp),
                quarter = (Math.floor(date.getUTCMonth() / 3) + 1);
            console.log(quarter);
            return quarter;
        }
    };
    (function (H) { // internal functions
        function stopEvent(e) {
            if (e) {
                if (e.preventDefault) {
                    e.preventDefault();
                }
                if (e.stopPropagation) {
                    e.stopPropagation();
                }
                e.cancelBubble = true;
            }
        }
        // the wrap
        H.wrap(H.Chart.prototype, 'render', function (proceed) {
            var chart = this,
                mapNavigation = chart.options.mapNavigation;
            proceed.call(chart);
            // Add the mousewheel event
            H.addEvent(chart.container, document.onmousewheel === undefined ? 'DOMMouseScroll' : 'mousewheel', function (event) {
                var delta,
                    extr,
                    step,
                    newMin,
                    newMax,
                    axis = chart.xAxis[0];
                var dataMax = chart.xAxis[0].dataMax,
                    dataMin = chart.xAxis[0].dataMin,
                    stepDivisor = 5,
                    newExtrMin,
                    newExtrMax;
                e = chart.pointer.normalize(event);
                // Firefox uses e.detail, WebKit and IE uses wheelDelta
                delta = e.detail || -(e.wheelDelta / 120);
                delta = delta < 0 ? 1 : -1;
                if (chart.isInsidePlot(e.chartX - chart.plotLeft, e.chartY - chart.plotTop)) {
                    extr = axis.getExtremes();
                    step = (extr.max - extr.min) / stepDivisor * delta;
                    if ((extr.min + step) <= dataMin) {
                        newExtrMin = dataMin;
                        newExtrMax = extr.max;
                    } else if ((extr.max + step) >= dataMax) {
                        newExtrMin = extr.min;
                        newExtrMax = dataMax;
                    } else {
                        newExtrMin = extr.min + step;
                        newExtrMax = extr.max + step;
                    } axis.setExtremes(newExtrMin, newExtrMax, true, false);
                }
                stopEvent(event); // Issue #5011, returning false from non-jQuery event does not prevent default
                return false;
            });
        });
    }(Highcharts));
    var myChart = Highcharts.stockChart('highbar', {
        // SECTION - Highcharts - top
        legend: {
            enabled: true
        },
    navigator: {
        // enabled: false
    },
        responsive: {
            rules: [
                {
                    condition: {
                        maxWidth: 500
                    },
                    chartOptions: {
                        chart: {},
                        subtitle: {
                            text: null
                        },
                        navigator: {
                            enabled: false
                        }
                    }
                }
            ]
        },
        chart: {
            alignTicks: true,
            style: {
                fontFamily: "'Nunito Sans', Verdana, Arial, Helvetica, sans-serif",
                textOutline: false,
                fontSize: "14px"
            },
            borderWidth: 2,
            marginRight: 70,
            renderTo: 'highbar',
            events: {
                render() {
                    var ticks = this.xAxis[0].ticks,
                        ticksPositions = this.xAxis[0].tickPositions,
                        tick0x,
                        tick1x,
                        getPosition = function (tick) {
                            var axis = tick.axis;
                            return Highcharts.Tick.prototype.getPosition.call(tick, axis.horiz, tick.pos, axis.tickmarkOffset);
                        };
                    tick0x = getPosition(ticks[ticksPositions[0]]).x;
                    tick1x = getPosition(ticks[ticksPositions[1]]).x;
                    this.xAxis[0].labelGroup.translate((tick1x - tick0x) / 2)
                }
            }
        },
        title: {
            text: '{{ fin_metric_name }}'
        },
        rangeSelector: { // SECTION - Highcharts - range selector
            selected: 2,
            inputPosition: { align: 'center',
                x: 0,
                y: 0
            },
            buttonPosition: { // align: 'right',
                x: 0,
                y: 0
            },
            buttons: [
                {
                    type: 'year',
                    count: 3,
                    text: '3Y',
                    dataGrouping: {
                        enable: true
                    }
                }, {
                    type: 'year',
                    count: 5,
                    text: '5Y',
                    dataGrouping: {
                        enable: true
                    }
                }, {
                    type: 'year',
                    count: 10,
                    text: '10y',
                    dataGrouping: {
                        enable: false
                    }
                }, {
                    type: 'all',
                    text: 'All',
                    dataGrouping: {
                        enable: false,
                        approximation: groupings[4]
                    }
                }
            ]
        },
        xAxis: [
            {
                // SECTION - Highcharts - xAxis = top
                events: {
                    afterSetExtremes: function () {
                        this.displayBtn ? $('.highcharts-scrollbar').show() : $('.highcharts-scrollbar').hide()
                    },

                },
                scrollbar: {
                    enabled: true
                },
                // zoomType: 'x',
                events: {
                    load: function () {
                        $('.highcharts-scrollbar').hide()
                    }
                },
                labels: {
                    style: {
                        color: '#black', // 'red'
                        fontSize: '14px'
                    }
                },
                crosshair: {
                    width: 2,
                    color: '#1C9179',
                    snap: false,
                    className: "x_crosshair",
                    zIndex: 100
                },
                type: 'datetime',
                dateTimeLabelFormats: {
                    month: 'Q%q', //'%Y', // 'Q%q - %y',
                    year: '%Y'
                },
                // alternateGridColor: '#FDFFD5', // '#FEF8E3'
                minPadding: 0,
                // pointInterval: 1,//1000 * 3600 * 24 * 91.
        labels: {
            enabled: false,
            // step: 1
        }
            }, {
                labels: {
                    style: {
                        color: 'black', // 'red'
                        fontSize: '14px',
                        fontWeight: 'bold'
                    }
                },
                crosshair: {
                    width: 2,
                    color: '#1C9179',
                    snap: false,
                    className: "x_crosshair",
                    zIndex: 100
                },
                type: 'datetime',
                dateTimeLabelFormats: {},
                format: '{value:%Y}',
                minPadding: 0
            },
        ],
        plotOptions: {
            // SECTION - Highcharts - plotOptions
            series: { // SECTION - Highcharts - plotOptions - series - all
                connectNulls: true,
                dataLabels: {
                    enabled: true,
                    formatter: function () { // if last point
                        if (this.point === this.series.data[this.series.data.length - 1]) {
                            return this.series.name;
                        }
                    }
                }
            },
            line: { // SECTION - Highcharts - plotOptions - line
                allowPointSelect: true,
                connectNulls: true,
                dataLabels: {
                    enabled: true,
                    format: "FY {point.x:%Y}", // "{point.x:%b %e}",
                },
                pointPlacement: 'on'
            },
            spline: { // SECTION - Highcharts - plotOptions - area

                dataLabels:{
                                className: 'chart_fy_metric',
                                fontWeight: 'bold',
                                padding: 5,
                                enabled: true,

                                // useHTML: true,
                                borderRadius: 5,
                                backgroundColor: '#FFFFFF',
                                opacity: .7,
                                zIndex:180,
                                crop: false,
                                overflow: 'visible',
                                y: -10,
                                x: 40,
                                formatter: function () {
                                    // var point1 = this.series.data[this.series.data.length - 1];
                                    var point1 = this.series.data[this.series.data.length - 5];
                                    // return point1
                                    if (this.point == point1) {
                                        var latest_stock_price = this.y;
                                        return "<div class=\"chart_current_metric\">Last 4 Qtrs<br/>"  + "{{currency_symbol}}" + this.y + 'B</div>'
                                        };}
                },
                // allowPointSelect: true,
                // dataLabels: {
                //     enabled: true,
                //     // useHTML: true,
                //     borderRadius: 5,
                //     backgroundColor: '#FFFFFF',
                //     opacity: .7,
                //     borderWidth: 1,
                //     borderColor: '#AAA',
                //     // zIndex:80,
                //     crop: false,
                //     overflow: 'visible',
                //     y: -10,
                //     x: 20,
                //     style: {
                //         color: '#000000', // 'red'
                //         fontSize: '14px',
                //         backgroundColor: 'black',
                //         textOutline: false,
                //         textAlign: 'center',
                //         align: 'right'
                //     },
                //     formatter: function () {
                //         if (this.point == this.series.data[this.series.data.length - 1]) {
                //             return "<div class=\"chart_current_price\">" + "Stock Price<br/>" + "{{ currency_symbol }}" + Math.round(this.y * 100) / 100;
                //         } + "";
                //         +'</div>'
                //     }
                // },
                // pointPlacement: 'on'
            },
            column: { // SECTION - Highcharts - plotOptions- column
                groupPadding: 0.1,
                 color: '#D6D9BF',

                // dataLabels:{
                //     formatter: function () {
                //                     var dataMax = this.series.dataMax;
                //                     var dataMin = this.series.dataMin;
                //                     if (this.y === dataMax) {
                //                         return('<b>Top<br />' + max_min_num) + '</b>';
                //                         // return this.y;
                //                     }
                //                     if (this.y === dataMin) {
                //                         return('<b>Bottom<br />' + max_min_num) + '</b>';
                //                     }
                //                 }
                // },
                // dataLabels:{
                //                 className: 'chart_fy_metric',
                //                 fontWeight: 'bold',
                //                 padding: 5,
                //                 enabled: true,

                //                 // useHTML: true,
                //                 borderRadius: 5,
                //                 backgroundColor: '#FFFFFF',
                //                 opacity: .7,
                //                 zIndex:180,
                //                 crop: false,
                //                 overflow: 'visible',
                //                 y: -10,
                //                 x: 40,
                //                 formatter: function () {
                //                     var point1 = this.series.data[this.series.data.length - 1];
                //                     // return point1
                //                     if (this.point == point1) {
                //                         return "<div class=\"chart_current_metric\">Last 4 Qtrs<br/>"  + "{{currency_symbol}}" + this.y + 'B</div>'
                //                         };}
                // },
            },
            series: {
                name: 'Quarterly Data',
                groupPadding: 0,
                dataGrouping: {
                    enabled: false
                },
                type: 'line',
                xAxis: 1,

            },
            series: {
                type: 'area',
                marker: {
                    radius: 4,
                    // fillColor: '#1ebd1e',
                    enabled: true,
                    zIndex: 100
                },
                xAxis: 0,
                name: "Full-Year (FY)   {{ fin_metric_name }}",
                dataGrouping: {
                    enabled: false
                },
                states: {
                    inactive: {
                        opacity: 1
                    }
                }
            }
        },
        yAxis: [
            {
                // SECTION - Highcharts - yAxis
                title: "% Change",
                // height: '100%',
                // min: '50',
                yAxis: 1,
                tickAmount: 5,

                offset: 0,
                // visible: false,
                maxPadding: 0.1,
                crosshair: {
                    width: 2,
                    color: '#1C9179',
                    snap: false,
                    className: "y_crosshair",
                    zIndex: 100
                },
                opposite: true,
                showFirstLabel: false,
                showLastLabel: false,
                gridLineColor: 'transparent',

                // tickInterval: 10,
                tickPositioner() {
                    let tickPositions = this.tickPositions;
                    tickPositions[0] = this.dataMin; // Math.round(this.dataMin);
                    tickPositions[tickPositions.length - 1] = this.dataMax;
                    return tickPositions;
                },
                    // startOnTick: true,
                    // endOnTick: true,
                labels: {
                    style: {
                        color: 'black', // 'red'
                        fontSize: '14px',
                        fontWeight: 'bold'
                    },
                    formatter: function(){
                        zoom_values_stock_price = $(this.axis.tickPositions)
                        // zoom_values[zoom_values.length-1] = 150 = last
                        // zoom_values[1]; = 25 = after 0
                        // zoom_values[0] = current value!!!
                        // this.series.data[this.series.data.length - 1] = last point value precise
                        // point1;
                        // latest_stock_price
                        price_percent = Math.round(100 * this.value / zoom_values_stock_price[0])-100

                        return '' + price_percent + '' + '' + '%'; // zoom_values[0];// zoom_values[1];//.last()[0]// Math.round(100 * this.value / zoom_values.last()[0]) + '%';
                        // zoom_values[zoom_values.length-3];//.last()[0] + '%'; // $(this.axis.tickPositions).last()[0] = 150
                    //   return Math.round(100 * this.value / $(this.axis.tickPositions).last()[0]) + '%';
                    },
                    align: 'right'
                }
            },
            {
                opposite:false,
                yAxis: 1,
                maxPadding: 0.1,
                height: '100%',
                crosshair: {},
                showFirstLabel: false,
                showLastLabel: false,
                // linkedTo: 1,
                gridLineColor: 'transparent',
                // opposite: false,
                // minPadding: 100,


                // tickPositioner() {
                //     let tickPositions = Math.round(this.tickPositions);
                //     tickPositions[0] = Math.round(this.dataMin);
                //     tickPositions[tickPositions.length - 1] = Math.round(this.dataMax);
                //     return tickPositions;
                // },

                // startOnTick: true,
                // endOnTick: true,
                // labels: {
                //     style: {
                //         color: 'black', // 'red'
                //         fontSize: '14px',
                //         fontWeight: 'bold'
                //     },
                //     formatter: function(){
                //         zoom_values = $(this.axis.tickPositions)
                //         // zoom_values[zoom_values.length-1] = 150 = last
                //         // zoom_values[1]; = 25 = after 0
                //         // zoom_values[0] = current value!!!
                //         // this.series.data[this.series.data.length - 1] = last point value precise
                //         // point1;
                //         // latest_stock_price

                //         return Math.round(100 * this.value / zoom_values[0])-100 + '%'; // zoom_values[0];// zoom_values[1];//.last()[0]// Math.round(100 * this.value / zoom_values.last()[0]) + '%';
                //         // zoom_values[zoom_values.length-3];//.last()[0] + '%'; // $(this.axis.tickPositions).last()[0] = 150
                //     //   return Math.round(100 * this.value / $(this.axis.tickPositions).last()[0]) + '%';
                //     },
                //     align: 'right'
                // },
                tickAmount: 5,
                tickPositioner: function () {
                    var positions = [],
                        tick = Math.floor(this.dataMin),
                        increment = Math.ceil((this.dataMax - this.dataMin) / 6);

                    for (; tick - increment <= this.dataMax; tick += increment) {
                        positions.push(tick);
                    }
                    return positions;
                },
                labels: { // SECTION - Highcharts - yAxis - labels
                    style: {
                        color: 'black', // 'red'
                        fontSize: '14px'
                    },
                    x: 50,
                    // opposite: false,
                    align: 'right',
                    formatter: function () {
                        zoom_values_fy_metric = $(this.axis.tickPositions)
                        // zoom_values[zoom_values.length-1] = 150 = last
                        // zoom_values[1]; = 25 = after 0
                        // zoom_values[0] = current value!!!
                        // this.series.data[this.series.data.length - 1] = last point value precise
                        // point1;
                        // latest_stock_price

                        // return Math.round(100 * this.value / zoom_values_fy_metric[0])-100 + '%'; // zoom_values[0];// zoom_values[1];//.last()[0]// Math.round(100 * this.value / zoom_values.last()[0]) + '%';

                        if (this.value >= 1000000000) {
                            billion = this.value / 1000000000;
                            billion_rounded = Math.round((billion) * 1) / 1;
                            metric_percent = (Math.round(100 * this.value / zoom_values_fy_metric[0]))-100;
                            return('<b>  {{ currency_symbol }}' + billion_rounded + 'B</b>' + '' + '%' );
                        } else if (this.value >= 1000000) {
                            million = this.value / 1000000
                            million_rounded = Math.round((million) * 1) / 1;
                            return('<b>  {{ currency_symbol }}' + million_rounded) + 'M</b>';
                        } else if (this.value >= 10000) {
                            thousand = this.value / 1000
                            thousand_rounded = Math.round((thousand) * 1) / 1;
                            return('<b>  {{ currency_symbol }}' + this.value / 1000) + 'K</b>';
                        } else { // return '<b>$' + this.y + '</b>';
                            ratio = this.value / 1
                            million_rounded = Math.round((ratio) * 100) / 100;
                            return('<b>' + million_rounded) + '</b>';
                        }
                    }
                }
            },
            {
                // SECTION - Highcharts - yAxis
                // height: '100%',
                // min: '50',
                yAxis: 1,
                linkedTo: 0, // stock price
                // visible: false,
                maxPadding: 0.1,
                // showFirstLabel: false,
                // showLastLabel: false,
                crosshair: {
                    width: 2,
                    color: '#1C9179',
                    snap: false,
                    className: "y_crosshair",
                    zIndex: 100
                },
                gridLineColor: 'transparent',

                opposite: true,


                offset: -100,
                    // startOnTick: true,
                    // endOnTick: true,
                labels: {

                    style: {
                        color: 'black', // 'red'
                        fontSize: '14px',
                        fontWeight: 'bold',

                    },
                    formatter: function(){

                        return '{{ currency_symbol }}' + this.value; // zoom_values[0];// zoom_values[1];//.last()[0]// Math.round(100 * this.value / zoom_values.last()[0]) + '%';
                    },
                    align: 'right'
                }
            },

            , {},
        ],


        // SECTION - Highcharts - yAxis - tooltip (formatter)
        series: [
            {
                // SECTION - Highcharts - series - all
                type: 'scatter',
                marker: {
                    // symbol: 'triangle',
                    radius: 5,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                name: 'Quarterly (Q)   {{ fin_metric_name }}',
                pointInterval: 1,
                pointIntervalUnit: 'year',
                tooltip: {
                    // split: true,
                    shared: true,
                    xDateFormat: 'Q%q %Y',
                    shadow: true,
                    borderWidth: 1,
                    borderColor: '#AAA',
                    backgroundColor: '#FFFFFF', // '#1ebd1e', // 'red'
                    opacity: .7,
                    style: {
                        color: '#000000',
                        fontSize: '14px',
                        fontWeight: 'bold'
                    },
                    enabled: true,
                    // shared: false,
                    valuePrefix: "{{ currency_symbol }}",
                    pointFormatter: function () {
                        // ●♦■▲▼
                        // this.series.name
                        tooltip_legend = Highcharts.dateFormat('Q%q %Y', this.x) + ' '; // '● '+ this.series.name
                        if (this.y >= 1000000000) {
                            billion = this.y / 1000000000;
                            billion_rounded = Math.round((billion) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + billion_rounded) + 'B</b>';
                        } else if (this.y >= 1000000) {
                            million = this.y / 1000000
                            million_rounded = Math.round((million) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + million_rounded) + 'M</b>';
                        } else if (this.y >= 10000) {
                            thousand = this.y / 1000
                            thousand_rounded = Math.round((thousand) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + this.y / 1000) + 'K</b>';
                        } else { // return '<b>$' + this.y + '</b>';
                            ratio = this.y / 1
                            million_rounded = Math.round((ratio) * 100) / 100;
                            return(tooltip_legend + '<b>' + million_rounded) + '</b>';
                        }
                    },
                    positioner: function (width, height, point) {
                        var chart = this.chart,
                            position;
                        if (point.isHeader) {
                            position = {
                                x: Math.max(
                                    // Left side limit
                                    chart.plotLeft,
                                    Math.min(point.plotX + chart.plotLeft - width / 2,
                                    // Right side limit
                                    chart.chartWidth - width - chart.marginRight)
                                ),
                                y: point.plotY
                            };
                        } else {
                            position = {
                                x: point.series.chart.plotLeft,
                                y: point.series.yAxis.top - chart.plotTop
                            };
                        }
                        return position;
                    },
                    shape: 'square',
                    headerShape: 'callout',
                    borderWidth: 1,
                    borderColor: '#AAA',
                    shadow: false
                },
                data: df_json,
                zIndex: 98,
                yAxis: 1
            }, {
                type: 'line',
                yAxis: 1,
                zIndex: 100,
                tooltip: {
                    shared: true,
                    xDateFormat: 'FY %Y',
                    // '%b - %Y'
                    // backgroundColor: '#1ebd1e',
                    // tooltip_legend = '● '+ this.series.name
                    // tooltip_legend +
                    valuePrefix: "{{ currency_symbol }}",
                    pointFormatter: function () {
                        // ●♦■▲▼
                        // tooltip_legend = this.series.name + ' '; //'● '+ this.series.name
                        tooltip_legend = Highcharts.dateFormat('FY %Y', this.x) + ' '; // '● '+ this.series.name
                        if (this.y >= 1000000000) {
                            billion = this.y / 1000000000;
                            billion_rounded = Math.round((billion) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + billion_rounded) + 'B</b>';
                        } else if (this.y >= 1000000) {
                            million = this.y / 1000000
                            million_rounded = Math.round((million) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + million_rounded) + 'M</b>';
                        } else if (this.y >= 10000) {
                            thousand = this.y / 1000
                            thousand_rounded = Math.round((thousand) * 10) / 10;
                            return(tooltip_legend + '<b>  {{ currency_symbol }}' + this.y / 1000) + 'K</b>';
                        } else { // return '<b>$' + this.y + '</b>';
                            ratio = this.y / 1
                            million_rounded = Math.round((ratio) * 100) / 100;
                            return(tooltip_legend + '<b>' + million_rounded) + '</b>';
                        }
                    }
                },
                pointInterval: 3,
                pointIntervalUnit: 'month',
                color: '#1ebd1e', // '#343A40', // '#1C9179',
                lineWidth: 3,
                xDateFormat: '%Y',
                findNearestPointBy: 'xy',
                data: year_df_json
            }, {
                type: 'spline',
                name: 'Stock Price',
                color:'#40D644', // robinhood green
                // pointInterval: 1,
                // pointIntervalUnit: 'year',
                tooltip: {
                    // TODO make the datapoint markers better
                    backgroundColor: '#FFFFFF', // '#1ebd1e', // 'red'
                    opacity: .7,
                    style: {
                        color: '#000000',
                        fontSize: '14px',
                        fontWeight: 'bold'
                    },
                    enabled: true,
                    shared: true,
                    valuePrefix: "{{ currency_symbol }}",
                    pointFormatter: function () {
                        // https://stackoverflow.com/questions/25973920/how-to-display-highchart-series-line-marker-symbol-from-tooltip-formatter
                        // ●♦■▲▼
                        stock_price = Math.round((this.y) * 100) / 100;
                        return '♦ ' + this.series.name + ' <b>  {{ currency_symbol }}' + stock_price + '</b>';
                    }
                },
                data: price_json,
                zIndex: 98,
                // yAxis: 0,
            },
        ]
    });
});
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/corejs-typeahead/1.3.1/typeahead.bundle.min.js"></script>
        <style>
            .page-tabs{margin-top:20px;overflow:hidden;-webkit-border-radius:3px;border-radius:3px}
            .page-tabs,
            .page-tabs > ul{margin:0;padding:0}
            .page-tabs .tabs{clear:both;overflow:auto;width:100%}
            .page-tabs .tabs > li{float:left;list-style:none;display:block;cursor:pointer;background-color:gray}
            .page-tabs .tabs > li .tab-wrapper{padding:1px 0;font-size:16px;font-weight:bold;text-align:center;color:white;border-right:1px solid #dedede}
            .page-tabs .tabs > li.last .tab-wrapper{border-right:none}
            .page-tabs .tabs > li.xactive{background-color:#EDEDED}
            .page-tabs .tabs > li.xactive .tab-wrapper{color:#aa5c09}
            .page-tabs .tabs > li.first{}
            .page-tabs .tabs > li.last{}
            .page-tabs .panels{clear:both;position:relative;list-style:none}
            .page-tabs .panels > li{margin:0;padding:0;height:0;width:100%;list-style:none}
            .page-tabs .panels > li ul{margin:10px 20px}
            .page-tabs .panels > li ul li{list-style:disc}
            .page-tabs .panels .panel-wrapper{display:none;width:auto;padding:30px;background-color:#EDEDED;position:relative}
            .page-tabs .panels > li.xactive{height:auto}
            .page-tabs .panels > li.xactive .panel-wrapper{display:block}
            .page-tabs .panels .accordion-tab{display:none;padding:25px 30px;background-color:#808080;color:#FFF;font-weight:bold;cursor:pointer;font-size:20px}
            .page-tabs .panels .xactive .accordion-tab{border-bottom:none;background-color:#EDEDED;color:#AA5C09;padding-bottom:0}
            /* */
            @media only screen and(max-width: 700px){
                .page-tabs .tabs{display:none}
                .page-tabs .panels > li{position:static;height:auto}
                .page-tabs .panels .accordion-tab{display:block;border-bottom:1px solid #595959}
                .page-tabs .panels .panel-wrapper{width:auto;padding:30px}
                .page-tabs .panels .accordion-tab{font-size:17px}
            }
        </style>
        <style>
            .annual_percent{font-size:16px !important}
            h1{font-size:22px}
            h2{font-size:20px}
            i{text-align:center}
            tspan.chart_current_price{color:yellow !important}
            .yoy_table{max-height:400px;overflow-y:auto}

            .summary_header,
            .summary_body{padding:10px}
            .material-icons{font-size:20px}
            .up_green{color:#177737;/* color: #137333; */
                font-size:20px}

            .down_red{color:#d93025;/* color: #137333; */
            }

            .typeahead_icon{font-size:25px !important;margin:0 auto !important;text-align:center;display:in-line;vertical-align:middle}
            .pct_chg_summary{text-align:center}
            .max_min_summary{text-align:center}
        </style>
        <style>
            .tt-menu{max-height:130px;overflow-y:auto;width:500px;background-color:#FFFFFF
            }
            .typeahead{width:100px;background-color:yellow
            }
        </style>
    </head>
    <body class="fixed_body">
        <nav class="navbar navbar-light navbar-expand-md navigation-clean-search" style="color: #212529;">
            <div class="container">
                <div class="squarelogo">
                    <a class="navbar-brand dollar_data" href="#" style="color: #fec503;">
                        10
                    </a>
                </div>
                <button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1">
                    <span class="sr-only">
                        Toggle navigation
                    </span>
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navcol-1">
                    <ul class="nav navbar-nav">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" href="#">
                                First Item
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" href="#">
                                Second Item
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" href="#">
                                Third Item
                            </a>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav">
                        <li class="nav-item" role="presentation">
                            <form class="form-inline mr-auto" target="_self">
                                <div class="form-group">
                                    <form class="form-inline d-none d-sm-inline-block mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                                        <div class="input-group">
                                            <div class="lazytype">
                                                <input class="bg-light form-control border-0 small typeahead" type="text" placeholder="TSLA, AAPL, SPY...">
                                            </div>
                                            <div class="input-group-append">
                                                <button class="btn btn-primary py-0" type="button">
                                                    <!-- <i class="fas fa-search"></i> -->
                                                    <i class="material-icons typeahead_icon">
                                                        search
                                                    </i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </form>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav mx-auto">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" href="#">
                                BUY DATA
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" href="#">
                                Link 2
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" href="#">
                                Link 3
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a
                                class="dropdown-toggle nav-link"
                                data-toggle="dropdown"
                                aria-expanded="false"
                                href="#"
                            >
                                Dropdown
                            </a>
                            <div class="dropdown-menu" role="menu">
                                <a class="dropdown-item" role="presentation" href="#">
                                    First Item
                                </a>
                                <a class="dropdown-item" role="presentation" href="#">
                                    Second Item
                                </a>
                                <a class="dropdown-item" role="presentation" href="#">
                                    Third Item
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <script>
            $(".lazytype").one("click", function () {

                var bestPictures = new Bloodhound({
                    datumTokenizer: Bloodhound.tokenizers.obj.nonword('value'), // Bloodhound.tokenizers.obj.whitespace('tokens'),
                    queryTokenizer: Bloodhound.tokenizers.whitespace,
                    prefetch: "{{ url_for('static', filename='../static/json/company_urls_records_remote.json') }}"
                });
                bestPictures.initialize();
                $('.typeahead').typeahead(null, {
                    minLength: 1,
                    name: 'ticker',
                    display: 'value',
                    source: bestPictures,
                    highlight: true,
                    hint: false,
                    templates: {
                        empty: ['<div class="empty-message">', 'Try <p><a href=\"https://charts.tendollardata.com/TSLA>TSLA</a>, <a href=\"https://charts.tendollardata.com/AAPL>AAPL</a>, <a href=\"https://charts.tendollardata.com/SPY>SPY</a>...', '</div>'].join('\n'),
                        suggestion: function (data) {
                            return "<p><a href=\"https://charts.tendollardata.com/" + data['ticker'] + "\">" + data['value'] + "</a></p>"
                        }
                    }
                });

            });
        </script>
        <!-- <div class="tabbed">
                                  <input type="radio" id="tab21" name="css-tabs2" checked>
                                  <input type="radio" id="tab22" name="css-tabs2">
                                  <input type="radio" id="tab23" name="css-tabs2">
                                  <ul class="tabs">
                                    <li class="tab"><label for="tab21">Gangsta lipsum</label></li>
                                    <li class="tab"><label for="tab22">Zombie lipsum</label></li>
                                    <li class="tab"><label for="tab23">New age bullshit</label></li>
                                  </ul>
                                  <div class="tab-content">
                                    <h4>Gangsta lipsum</h4>
                                    <p>De.</p>
                                  </div>
                                  <div class="tab-content">
                                    <h4>Zombie lipsum</h4>
                                    <p>Zouris. </p>
                                  </div>
                                  <div class="tab-content">
                                    <h4>New age bullshit</h4>
                                    <p>Ourtion.</p>
                                    <p>Eoondage.</p>
                                    <p>Generated by the <a href="http://sebpearce.com/bullshit/">New Age Bullshit Generator</a></p>
                                  </div>
                                </div> -->
    </body>
</html>
</div>
<div class="table_container"></div>
<div id="chart"></div>
<script>
function checkForm() {
    var rows = document.getElementsByClassName("item-row");
    var arr = new Array();
    for (i = 0; i < rows.length; i ++) {
        var cols = rows[i].getElementsByTagName("td");
        for (j = 0; j < cols.length; j ++) {
            arr.push(cols[j].textContent);
        }
    }
}
</script>
<script>
// $(document).ready(function () {
//     $('DISABLE#df_myTable').DataTable({
//         columnDefs: [
//             {
//                 "width": "1000",
//                 "targets": "_all",
//                 render: function (data, type, full, meta) {
//                     if (type === 'display' && !isNaN(data * 1) && data > 1000000000) {
//                         return('$' + (
//                             data / 1000000000
//                         ).toFixed(1) + 'B').toLocaleString();
//                     } else if (type === 'display' && !isNaN(data * 1) && (data > 1000000 && data < 999999999)) {
//                         return('$' + (
//                             data / 1000000
//                         ).toFixed(1) + 'M').toLocaleString();
//                     } else if (type === 'display' && !isNaN(data * 1) && (data > 1000 && data < 999999)) {
//                         return('$' + (
//                             data / 1000
//                         ).toFixed(1) + 'K').toLocaleString();
//                     } else if (type === 'display' && !isNaN(data * 1) && (data > .01 && data < 2) && data != 1) {
//                         return((data * 100).toFixed(0) + '%').toLocaleString();
//                     } else {
//                         return data;
//                     }
//                 }
//             },
//         ],
//         dom: 'Bfrtip',
//         paginate: false,
//         colReorder: true,
//         buttons: []
//     });
// });
</script>
<div class="d-flex flex-column" id="content-wrapper">
    <div class="row">
        <!-- <div class="col-md-9 col-lg-9 col-xl-9">  -->
            <div class="col-md-8 col-lg-8 col-xl-8">
            <div class="text-dark h1_info">
                <h1 class="text-primary mb-0 pad-10-top pad-10-bottom pad-10-left pad-10-right">
                    <strong>
                        {{ company_long_name }}
                    (
                    {{ company_symbol }}
                    )
                    {{ fin_metric_name }}
                    |
                    {{ earliest_year }}
                    -
                    {{ latest_year }}
                    </strong>
                    <br>
                </h1>
                <h2 class="text-primary mb-0">
                    <!-- {{ latest_year }} -->
                    Last 12 Months
                {{ fin_metric_name }}
                    <span class="up_green">
                        <i class="fa fa-arrow-up up_green" aria-hidden="true"></i>
                    </span>
                    :
                    <i class="fa fa-arrow-down down_red" aria-hidden="true"></i>
                    <!-- <br / > -->
                    {{ last_4_quarters_str }}
                (YoY
                {{ y_y_chg }}
                )
                    <br>
                </h2>
            </div>
            <div class="pad-10-top pad-10-bottom pad-10-left pad-10-right">
                <div>
                    <div id="highbar" style="height: 600px; width:100%;">
                        <!-- <div id="highbar" style="height: 400px; width:100%;"> --></div>
                    <br>
                    Checkout the
                {{ fin_metric_name }}
                for
                {{ company_symbol }}
                competitors:
                {{ company_similar }}
                .
                </div>
                <div class="page-tabs">
                    <ul class="tabs">
                        <li>
                            Profit & Revenue Ratios (36)
                        </li>
                        <li>
                            Debt-Related Ratios (25)
                        </li>
                        <li>
                            Other Ratios (10)
                        </li>
                    </ul>
                    <ul class="panels">
                        <li>
                            Panel 1
                        </li>
                        <li>
                            Panel 2
                        </li>
                        <li>
                            Panel 3
                        </li>
                    </ul>
                </div>
                <script>
                var selectedTab = 0;
                $(".tabs").children().each(function (i) {
                    i = i + 1;
                    $(this).attr('id', "tab-" + i).addClass("tab").wrapInner("<div class='tab-wrapper'></div>");
                });
                var count = $(".tabs").children().length;
                var tab_width = (100 / count) + "%";
                $(".tabs li").css("width", tab_width).eq(0).addClass('first').end().eq(-1).addClass('last').end();
                $(".panels").children().each(function (i) {
                    i = i + 1;
                    $(this).attr('id', "panel-" + i).addClass("panel").wrapInner("<div class='panel-wrapper'></div>").prepend("<div class='accordion-tab'></div>");
                });
                $(".accordion-tab").each(function (i) {
                    i = i + 1;
                    var tab_name = $("#tab-" + i).html();
                    $(this).html(tab_name);
                });
                $(".tabs").children().eq(selectedTab).addClass("xactive");
                $(".panels").children().eq(selectedTab).addClass("xactive");
                $(".tabs > li").click(function () {
                    $(".tabs > li, .panels > li").removeClass("xactive");
                    $(".panels > li").eq($(this).index()).toggleClass("xactive");
                    $(this).toggleClass("xactive");
                });
                $(".accordion-tab").click(function () {
                    $(".tabs > li, .panels > li").removeClass("xactive");
                    $(".tabs > li").eq($(this).parent().index()).toggleClass("xactive");
                    $(this).parent().toggleClass("xactive");
                });
                </script>
                <div class="content">
                    <div class="row flex-grow-1">
                        <div class="col-md-4 col-xl-6" style="padding: 10px;"></div>
                    </div>
                    <div class="row flex-grow-1 justify-content-center">
                        <div class="col">
                            <div class="card shadow mb-4">
                                <!-- dropdown -->
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="text-primary font-weight-bold m-0 metric_table">
                                        {{ company_long_name }}
                                    (
                                    {{ company_symbol }}
                                    ) Historical
                                    {{ fin_metric_name }}
                                    Table
                                    </h6>
                                </div>
                                <div class="card-body yoy_table">
                                    {% for table in df_html_tall %}
                                    {{ df_html_tall[0]|safe }}
                                {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid">
                    </br>
                    <div class="col">
                        <div></div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div id="accordion" class="accordion">
                    <div class="card mb-0">
                        <div class="card-header collapsed" data-toggle="collapse" href="#collapseOne">
                            <a class="card-title">
                                {{ fin_metric_name }}
                            Definition and Formula (What is Current Ratio?)
                            </a>
                        </div>
                        <div id="collapseOne" class="card-body collapse" data-parent="#accordion">
                            <p>
                                According to Investopedia... See: Macrotrends and Gurufocus definitions https://www.gurufocus.com/term/mktcap/AAPL/Market-Cap/Apple
                            {{ company_description }}
                            </p>
                            <p>
                                {{ company_long_name }}
                            {{ country_ipo_date }}
                            on the
                            {{ company_exchange }}
                            exchange and started trading with the ticker "
                            {{ company_symbol }}
                            ".
                            </p>
                        </p>
                        <p>
                            {{ company_short_name }}
                        celebrated it's 10th year anniversary with a
                        {{ fin_metric_name }}
                        of 10. By the looks of it's history (see: the chart and stats above), you can expect
                        {{ company_short_name }}
                        to maintain a positive
                        {{ fin_metric_name }}
                        .
                        </p>
                    </div>
                    <div id="collapseThree" class="collapse" data-parent="#accordion">
                        <div class="card-body">
                            Apple, Inc's
                        {{ fin_metric_name }}
                        is 0.7, and it's a great one. A
                        {{ fin_metric_name }}
                        of 0.7 places it ahead of it's industry (Computer Hardware) average of 0.5 and sector (Technology) average. The industry includes the likes of
                        {{ company_similar }}
                        . The highest and lowest
                        {{ fin_metric_name }}
                        in the industry are 0.9 (NFLX) and 0.3 (GOOGL), respectively.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col">
    <div class="card shadow border-left-primary py-2" style="margin: 10px;">
        <!-- <div class="card shadow border-left-primary py-2 sticky-top" style="margin: 10px;"> -->
        <div class="card-body summary_header">
            <h2 class="text-primary mb-0 historical">
                <!-- Summary Statistics (Annual)
                            <br> -->
                <!-- {{ fin_metric_name }} -->
                <!-- <br> -->
                Stats
                <!-- (
            {{ earliest_year }}
            -
            {{ latest_year }}
            ) -->
            </h2>
            <!-- <br> -->
            <!-- <div class="text-dark font-weight-bold h5 mb-0"></div> -->
        </div>
        <div class="card-body summary_body">
            <div class="text-dark font-weight-bold h5 mb-0"></div>
            <div class="table-responsive">
                <table class="table">
                    <!-- <thead class="fin_metric-stats">
                                        <tr>
                                            <th>
                                                Statistic
                                            </th>
                                            <th>
                                                Ratio
                                            </th>
                                        </tr>
                                    </thead> -->
                    <tbody>
                        {% if statement_or_ratio != "ratios" %}
                        <tr>
                            <td class="hist_measure">
                                Lifetime, Total (
                                {{ earliest_year }}
                                -
                                {{ latest_year }}
                                )
                            </td>
                            <td class="hist_stats">
                                {{ lifetime_sum_all_metric }}
                            </td>
                            <td rowspan="2" class="subtd pct_chg_summary">
                            </td>
                        </tr>
                        {% endif %}
                        <!-- <tr>
                            <td class="hist_measure">
                                Change (
                            {{ earliest_year }}
                            -
                            {{ latest_year }}
                            )
                            </td>
                            <td class="hist_stats">
                                <b>
                                    {{ historical_pct_chg }}
                                </b>
                            </td>
                        </tr> -->
                        <tr>
                            <!-- <td class="hist_measure">
                                                        Change (Annual)
                                                    </td>
                                                    <td class="hist_stats">
                                                        {{ annual_pct_chg_str }}
                                                    </td> --></tr>
                        <tr>
                            <td class="subtd_header">
                                {{ latest_year }}
                            </td>
                            <td class="subtd_body">
                                {{ latest_metric_str }}
                            </td>
                            <td rowspan="2" class="subtd pct_chg_summary">
                                {{ hist_pct_chg_str }}
                                <br>
                                <span class="over_x_years">
                                    (
                                {{ annual_pct_chg_str }}
                                /year)
                                <!-- annual average) -->
                                </span>
                            </td>
                            <!-- <td class="subtd">{{ annual_pct_chg_str }}</td> -->
                        </tr>
                        <tr>
                            <td class="subtd_header">
                                {{ earliest_year }}
                            </td>
                            <td class="subtd_body">
                                {{ earliest_metric_str }}
                            </td>
                        </tr>
                    </tbody>
                </tr>
                <tr>
                    <td class="hist_measure">
                        Peak
                    </td>
                    <td class="hist_stats">
                        {{ max_str }}
                    </td>
                    <td rowspan="2" class="subtd max_min_summary">
                        {{ max_min_range_str }}
                    </td>
                </tr>
                <tr>
                    <td class="hist_measure">
                        Bottom
                    </td>
                    <td class="hist_stats">
                        {{ min_str }}
                    </td>
                </tr>
                <!-- <tr>
                                                                                            <td class="hist_measure">Top 25%</td>
                                                                                            <td class="hist_stats">{{top_25_str}}</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td class="hist_measure">Average (μ)</td>
                                                                                            <td class="hist_stats">{{mean_str}}</td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td class="hist_measure">Bottom 25%</td>
                                                                                            <td class="hist_stats">{{bottom_25_str}}</td>
                                                                                        </tr> -->
                <!-- <tr>
                                    <td class="hist_measure">
                                        All-Time Low
                                    </td>
                                    <td class="hist_stats">
                                        {{ min_str }}
                                    </td>
                                </tr> -->
                <!-- <tr>
            <td class="subtd_header">Bottom</td>
            <td class="subtd_header">Peak</td>
            <td class="subtd"></td>
            </tr>
            <tr>
            <td class="subtd">{{ min_str }}</td>
            <td class="subtd">{{ max_str }}</td>
            <td class="subtd">{{ max_min_range_str }}</td>
            </tr> -->
            </tbody>
        </table>
    </div>
    <!-- <p>
                In Plain English (Highlights)
            </p>
            <p>
                {{ company_short_name }}
            (
            {{ company_symbol }}
            ) had a
            {{ fin_metric_name.lower() }}
            of
            {{ latest_metric }}
            in
            {{ latest_year }}
            .
                                                    At it's peak, that number was {{max_str}}.<br />
                                                    At it's bottom, that number was {{min_str}}.
            .
                                                    Increased
            {{ num_years_increased }}
            of
            {{ num_years }}
            .
                                                    If you add up all of
            {{ company_short_name }}
            's'
            </p> -->
    <!-- <p>
                The arithmetic mean is used to calculate annual percent change (as opposed to geometric mean).
            </p> -->
    <!-- <p>If you'd have invested in </p> -->
    <p>
        Save time and invest smart. Understand how
    {{ company_symbol }}
stacks up to all its competitors.
    </p>
    <div class="button_div">
        <button class="btn btn-primary button_buy" type="button">
            Historical Financial Ratios Data for entire
        {{ company_sector }}
        Sector for $10
        </button>
    </div>
    <!-- <p>
                To buy the RAW DATA for financial ratios . Ultimately, only high-level analysis in excel gives you the bigger picture
            </p> -->
    <!-- <p>
                the chart data has been cleaned for the clearest analysis. We smooth seasonal spikes and fill in missing data with interpolated values. You can see the clearest historical trend this way. For the raw value, see the table below.
            </p> -->
</div>
</div>
</div>
</div>
<div class="content">
    <div class="row flex-grow-1">
        <div class="col-md-4 col-xl-6" style="padding: 10px;"></div>
    </div>
    <div class="row flex-grow-1 justify-content-center">
        <div class="col">
            <div class="card shadow mb-4">
                <!-- dropdown -->
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary font-weight-bold m-0 metric_table">
                        {{ company_long_name }}
        (
        {{ company_symbol }}
        ) Historical
        {{ fin_metric_name }}
        Table
                    </h6>
                </div>
                <div class="card-body yoy_table">
                    {% for table in df_html_tall %}
        {{ df_html_tall[0]|safe }}
    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
    </br>
    <div class="col">
        <div></div>
    </div>
</div>
</div>
</div>
<!-- <script src="https://code.highcharts.com/stock/modules/exporting.js"></script> -->
<script type="text/javascript">$.typeahead({
    input: '.js-typeahead',
    minLength: 1,
    filter: false, // Disables typahead filter to just show everything in the results from the database
    debug: true,
    highlight: true,
    maxItem: 10,
    dynamic: true,
    delay: 200,
    searchOnFocus: true,
    backdrop: {
        "background-color": "#fff"
    },
    href: "{{ url }}",
    emptyTemplate: "no result for    {{ query }}",
    display: ["name"]
});
</script>
</body>
</html>
